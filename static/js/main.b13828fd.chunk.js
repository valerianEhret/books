(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{186:function(e,t,a){},266:function(e,t,a){"use strict";a.r(t);var r,n=a(0),c=a.n(n),i=a(29),o=a.n(i),s=(a(186),a(270)),l=a(268),u=a(81),d=a(27),j=a(269),O=a(274),b=a(6),h=a(54),m=a(271),f=a(26),y=a(102),p=a(20),x=a(276),T={authors:{1:{id:"1",first_name:"George",last_name:"Martin"},2:{id:"2",first_name:"John Ronald Reuel",last_name:"Tolkien"},3:{id:"3",first_name:"Joanne",last_name:"Rowling"}},isLoading:!1,status:"idle"};!function(e){e.ADD_AUTHOR="ADD_AUTHOR",e.SET_AUTHOR_STATUS="SET_AUTHOR_STATUS",e.SET_AUTHOR_IS_LOADING="SET_AUTHOR_IS_LOADING",e.DELETE_AUTHOR="DELETE_AUTHOR",e.SET_AUTHOR="SET_AUTHOR"}(r||(r={}));var _,N=function(e){return{type:r.ADD_AUTHOR,payload:e}},S=function(e){return{type:r.SET_AUTHOR_STATUS,payload:e}},A=function(e){return{type:r.SET_AUTHOR_IS_LOADING,payload:e}},E=function(e){return{type:r.DELETE_AUTHOR,payload:e}},g=function(e){return{type:r.SET_AUTHOR,payload:e}},I=a(166),k=function(){return Object(b.jsx)("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,outline:0,overflow:"auto",backgroundColor:"black",opacity:.5,zIndex:1e3},children:Object(b.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(b.jsx)(I.a,{size:"large"})})})},v=a(150),D=a.n(v),R=a(170),U=a(106);!function(e){e.REMOVE_BOOK="REMOVE_BOOK",e.ADD_BOOK="ADD_BOOK",e.SET_IS_LOADING="BOOK/SET_IS_LOADING",e.SET_STATUS="BOOK/SET_STATUS",e.SET_BOOK="SET_TITLE"}(_||(_={}));var B,H={books:[{id:"1",title:"Game of Thrones",author_id:"1",created_at:"2021-10-05",year:"1996-08-01"},{id:"2",title:"Clash of Kings",author_id:"1",created_at:"2021-10-05",year:"1999-02-01"},{id:"3",title:"The Return of the King",author_id:"2",created_at:"2021-10-05",year:"1955-10-20"},{id:"4",title:"Philosophers Stone",author_id:"3",created_at:"2021-10-05",year:"1997-01-01"}],status:"idle",isLoading:!1},L=function(e){return{type:_.REMOVE_BOOK,payload:e}},K=function(e){return{type:_.ADD_BOOK,payload:e}},C=function(e){return{type:_.SET_IS_LOADING,payload:e}},M=function(e){return{type:_.SET_STATUS,payload:e}},V=function(e){return{type:_.SET_BOOK,payload:e}},F=a(273),G=a(275),w=a(130),q=Object(w.a)({mapPropsToValues:function(e){return e.myValues?e.myValues:{lastName:"",firstName:""}},validate:function(e){var t={};return e.firstName&&e.firstName.trim()?/^([^0-9]*)$/.test(e.firstName)||(t.firstName="Invalid field format"):t.firstName="This field is required!",e.lastName&&e.lastName.trim()?/^([^0-9]*)$/.test(e.lastName)||(t.lastName="Invalid field format"):t.lastName="This field is required!",t},handleSubmit:function(e,t){t.props.submit(e)}})((function(e){var t=e.loading,a=e.values,r=e.handleChange,n=e.handleBlur,c=e.handleSubmit,i=e.errors,o=e.touched;return Object(b.jsxs)("form",{onSubmit:c,children:[Object(b.jsx)(F.a.Item,{validateStatus:o.firstName&&i.firstName?"error":"success",help:o.firstName&&i.firstName,rules:[{required:!0}],children:Object(b.jsx)(G.a,{name:"firstName",placeholder:"firstName",value:a.firstName,onChange:r,onBlur:n})}),Object(b.jsx)(F.a.Item,{validateStatus:o.lastName&&i.lastName?"error":"success",help:o.lastName&&i.lastName,rules:[{required:!0}],children:Object(b.jsx)(G.a,{name:"lastName",placeholder:"lastName",value:a.lastName,onChange:r,onBlur:n})}),Object(b.jsx)(F.a.Item,{children:Object(b.jsx)(h.a,{type:"primary",htmlType:"submit",disabled:t,children:"Create"})})]})})),J=a(31),z=a(272),P=a(104),Y=a(60),$=a.n(Y),Q=function(e){var t=e.getFullYear(),a=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return"".concat(t,"-").concat(a,"-").concat(r)},W=Object(w.a)({mapPropsToValues:function(e){return e.myValues?e.myValues:{title:"",year:null,authorID:""}},validate:function(e){var t={};return e.title&&e.title.trim()||(t.title="This field is required!"),e.year||(t.year="This field is required!"),e.authorID||(t.authorID="This field is required!"),t},handleSubmit:function(e,t){t.props.submit(e)}})((function(e){var t=e.authors,a=e.loading,r=e.values,n=e.handleChange,c=e.handleBlur,i=e.handleSubmit,o=e.errors,s=e.touched,l=e.setFieldValue;return Object(b.jsxs)(F.a,{onFinish:i,children:[Object(b.jsx)(F.a.Item,{validateStatus:s.title&&o.title?"error":"success",help:s.title&&o.title,children:Object(b.jsx)(G.a,{name:"title",placeholder:"title",value:r.title,onChange:n,onBlur:c})}),Object(b.jsx)(F.a.Item,{validateStatus:s.year&&o.year?"error":"success",help:s.year&&o.year,children:Object(b.jsx)(z.a,{name:"year",value:r.year?$()(r.year):null,onChange:function(e){e&&l("year",Q(e.toDate()))}})}),Object(b.jsx)(F.a.Item,{name:"authorID",validateStatus:s.authorID&&o.authorID?"error":"success",help:s.authorID&&o.authorID,children:Object(b.jsx)(P.a,{defaultValue:r.authorID,onBlur:c,onChange:function(e){return l("authorID",e)},children:t.map((function(e){return Object(b.jsx)(P.a.Option,{value:e.id,children:"".concat(e.first_name," ").concat(e.last_name)},e.id)}))})}),Object(b.jsx)(F.a.Item,{children:Object(b.jsx)(h.a,{type:"primary",htmlType:"submit",disabled:a,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})]})}));!function(e){e.BOOKS="/books",e.AUTHORS="/authors",e.MAIN="/",e.AUTHOR_CREATE="/author/create",e.BOOK_CREATE="/book/create",e.ABOUT_AUTHOR="/author/:id",e.ABOUT_BOOK="/book/:id",e.EDIT_AUTHOR="/author/edit/:id",e.EDIT_BOOK="/book/edit/:id"}(B||(B={}));var X=[{path:B.BOOKS,exact:!0,component:function(){var e=Object(f.c)((function(e){return e.books})),t=e.books,a=e.isLoading,r=Object(f.c)((function(e){return e.authors})).authors,n=Object(f.b)(),c=[{title:"Title",dataIndex:"title",key:"title"},{title:"AuthorFirstName",dataIndex:"authorFirstName",key:"authorFirstName"},{title:"AuthorLastName",dataIndex:"authorLastName",key:"authorLastName"},{title:"Year",dataIndex:"year",key:"year"},{title:"More",dataIndex:"more",key:"more",render:function(e){return Object(b.jsx)(d.b,{to:"/book/".concat(e),children:"more"})}},{title:"Edit",key:"edit",dataIndex:"edit",render:function(e){return Object(b.jsx)(d.b,{to:"/book/edit/".concat(e),children:"edit"})}},{title:"Delete",key:"delete",dataIndex:"delete",render:function(e){return Object(b.jsx)(h.a,{onClick:function(){n(L(e))},children:"delete"})}}],i=t.map((function(e){return{key:e.id,title:e.title,authorFirstName:r[e.author_id]?r[e.author_id].first_name:"",authorLastName:r[e.author_id]?r[e.author_id].last_name:"",year:e.year,more:e.id,edit:e.id,delete:e.id}}));return Object(b.jsxs)(b.Fragment,{children:[a&&Object(b.jsx)(k,{}),Object(b.jsxs)("div",{style:{margin:20},children:[Object(b.jsx)(l.a,{justify:"end",children:Object(b.jsx)(h.a,{type:"link",children:Object(b.jsx)(d.b,{to:"/book/create",children:"Create+"})})}),Object(b.jsx)(m.a,{columns:c,dataSource:i})]})]})}},{path:B.AUTHORS,exact:!0,component:function(){var e=Object(f.c)((function(e){return e.authors})),t=e.authors,a=e.isLoading,r=Object(f.b)(),n=[{title:"FirstName",dataIndex:"firstName",key:"firstName"},{title:"SecondName",dataIndex:"secondName",key:"secondName"},{title:"More",dataIndex:"more",key:"address",render:function(e){return Object(b.jsx)(d.b,{to:"/author/".concat(e),children:"more"})}},{title:"Edit",key:"edit",dataIndex:"edit",render:function(e){return Object(b.jsx)(d.b,{to:"/author/edit/".concat(e),children:"edit"})}},{title:"Delete",key:"delete",dataIndex:"delete",render:function(e){return Object(b.jsx)(h.a,{onClick:function(){r(function(e){return function(t){t(A(!0));try{t(E(e))}catch(a){console.log("Error: ",a)}finally{t(A(!1))}}}(e))},children:"delete"})}}],c=Object.keys(t).map((function(e){return{key:"key",firstName:t[e].first_name,secondName:t[e].last_name,more:e,edit:e,delete:e}}));return Object(b.jsxs)(b.Fragment,{children:[a&&Object(b.jsx)(k,{}),Object(b.jsxs)("div",{style:{margin:20},children:[Object(b.jsx)(l.a,{justify:"end",children:Object(b.jsx)(h.a,{type:"link",children:Object(b.jsx)(d.b,{to:"/author/create",children:"Create+"})})}),Object(b.jsx)(m.a,{columns:n,dataSource:c})]})]})}},{path:B.MAIN,exact:!0,component:function(){return Object(b.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(b.jsxs)(j.a,{children:[Object(b.jsx)(O.a.Title,{children:Object(b.jsx)(d.b,{to:"/books",children:"Books"})}),Object(b.jsx)(O.a.Title,{children:Object(b.jsx)(d.b,{to:"/authors",children:"Authors"})})]})})}},{path:B.AUTHOR_CREATE,exact:!0,component:function(){var e=Object(f.c)((function(e){return e.authors})),t=e.isLoading,a=e.status,r=Object(f.b)();return"success"===a?Object(b.jsx)(J.a,{to:"/authors"}):Object(b.jsx)(s.a,{children:Object(b.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(b.jsx)(q,{submit:function(e){var t,a=e.firstName.trim(),n=e.lastName.trim();r((t={firstName:a,lastName:n},function(e){e(A(!0));try{e(N(t)),e(S("success"))}catch(a){console.log("Error",a)}finally{e(A(!1)),e(S("idle"))}}))},loading:t})})})}},{path:B.BOOK_CREATE,exact:!0,component:function(){var e=Object(f.c)((function(e){return e.books})),t=e.isLoading,a=e.status,r=Object(f.b)(),n=Object(f.c)((function(e){return e.authors})).authors,c=Object.keys(n).map((function(e){return n[e]}));return"success"===a?Object(b.jsx)(J.a,{to:"/books"}):Object(b.jsx)(s.a,{children:Object(b.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(b.jsx)(W,{loading:t,submit:function(e){var t;e.year&&r((t={title:e.title,author_id:e.authorID,year:e.year,created_at:Q(new Date)},function(e){e(C(!0));try{e(K(t)),e(M("success"))}catch(a){console.log("Error: ",a)}finally{e(C(!1)),e(M("idle"))}}))},authors:c})})})}},{path:B.ABOUT_AUTHOR,exact:!0,component:function(){var e=Object(J.g)(),t=Object(f.c)((function(e){return e.authors}));return Object(b.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(b.jsxs)(j.a,{children:[Object(b.jsxs)(O.a.Title,{children:["First Name: ",t.authors[e.id].first_name]}),Object(b.jsxs)(O.a.Title,{children:["Last Name: ",t.authors[e.id].last_name]})]})})}},{path:B.ABOUT_BOOK,exact:!0,component:function(){var e=Object(J.g)(),t=Object(f.c)((function(e){return e.books})),a=Object(f.c)((function(e){return e.authors}));return Object(b.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(b.jsxs)(j.a,{children:[Object(b.jsxs)(O.a.Title,{children:["book title:",t.books.filter((function(t){return t.id===e.id}))[0].title]}),Object(b.jsxs)(O.a.Title,{children:["Author's first name: ",a.authors[t.books.filter((function(t){return t.id===e.id}))[0].author_id].first_name]}),Object(b.jsxs)(O.a.Title,{children:["Author's last name: ",a.authors[t.books.filter((function(t){return t.id===e.id}))[0].author_id].last_name]}),Object(b.jsxs)(O.a.Title,{children:["Year: ",t.books.filter((function(t){return t.id===e.id}))[0].year]})]})})}},{path:B.EDIT_AUTHOR,exact:!0,component:function(){var e=Object(f.c)((function(e){return e.authors})),t=e.authors,a=e.status,r=e.isLoading,n=t[Object(J.g)().id],c=n.id,i=n.last_name,o=n.first_name,u=Object(f.b)();return"success"===a?Object(b.jsx)(J.a,{to:"/authors"}):Object(b.jsx)(s.a,{children:Object(b.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(b.jsx)(q,{submit:function(e){var t,a=e.firstName.trim(),r=e.lastName.trim();u((t={id:c,lastName:r,firstName:a},function(e){e(A(!0));try{e(g(t)),e(S("success"))}catch(a){console.log("Error: ",a)}finally{e(A(!1)),e(S("idle"))}}))},myValues:{lastName:i,firstName:o},loading:r})})})}},{path:B.EDIT_BOOK,exact:!0,component:function(){var e=Object(f.c)((function(e){return e.books})),t=e.isLoading,a=e.status,r=e.books,n=Object(f.c)((function(e){return e.authors})).authors,c=Object(f.b)(),i=Object(J.g)().id,o=r.filter((function(e){return e.id===i}))[0],u=o.title,d=o.year,j=o.author_id,O=Object.keys(n).map((function(e){return n[e]}));return"success"===a?Object(b.jsx)(J.a,{to:"/books"}):Object(b.jsx)(s.a,{children:Object(b.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(b.jsx)(W,{loading:t,submit:function(e){var t;e.year&&c((t={id:i,year:e.year,title:e.title,authorID:e.authorID},function(){var e=Object(R.a)(D.a.mark((function e(a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(C(!0));try{a(V(t)),a(M("success"))}catch(r){console.log("Error: ",r)}finally{a(C(!1)),a(M("idle"))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},authors:O,myValues:{title:u,year:d,authorID:j}})})})}}],Z=function(){return Object(b.jsx)(s.a.Header,{children:Object(b.jsx)(l.a,{justify:"center",children:Object(b.jsxs)(u.a,{mode:"horizontal",theme:"dark",selectable:!1,children:[Object(b.jsx)(u.a.Item,{children:Object(b.jsx)(d.b,{to:B.MAIN,children:"Main"})},B.MAIN),Object(b.jsx)(u.a.Item,{children:Object(b.jsx)(d.b,{to:B.BOOKS,children:"Books"})},B.BOOKS),Object(b.jsx)(u.a.Item,{children:Object(b.jsx)(d.b,{to:B.AUTHORS,children:"Authors"})},B.AUTHORS)]})})})},ee=function(){return Object(b.jsx)(J.d,{children:X.map((function(e){return Object(b.jsx)(J.b,{path:e.path,exact:e.exact,component:e.component},e.path)}))})};var te,ae=function(){return Object(b.jsxs)(s.a,{children:[Object(b.jsx)(Z,{}),Object(b.jsx)(s.a.Content,{className:"h100",children:Object(b.jsx)(ee,{})})]})},re=a(138),ne=a(173),ce=Object(re.b)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.SET_BOOK:var a=Object(p.a)(Object(p.a)({},e),{},{books:Object(U.a)(e.books).map((function(e){return Object(p.a)({},e)}))});return a.books.forEach((function(e){e.id===t.payload.id&&(e.author_id=t.payload.authorID,e.year=t.payload.year,e.title=t.payload.title)})),Object(p.a)({},a);case _.REMOVE_BOOK:var n=Object(p.a)(Object(p.a)({},e),{},{books:Object(U.a)(e.books).map((function(e){return Object(p.a)({},e)}))});return Object(p.a)(Object(p.a)({},n),{},{books:n.books.filter((function(e){return e.id!==t.payload}))});case r.DELETE_AUTHOR:var c=Object(p.a)(Object(p.a)({},e),{},{books:Object(U.a)(e.books).map((function(e){return Object(p.a)({},e)}))});return Object(p.a)(Object(p.a)({},c),{},{books:c.books.filter((function(e){return e.author_id!==t.payload}))});case _.ADD_BOOK:var i=Object(x.a)(),o=Object(p.a)(Object(p.a)({},t.payload),{},{id:i});return{state:e,books:[].concat(Object(U.a)(e.books),[o])};case _.SET_IS_LOADING:return Object(p.a)(Object(p.a)({},e),{},{isLoading:t.payload});case _.SET_STATUS:return Object(p.a)(Object(p.a)({},e),{},{status:t.payload});default:return e}},authors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.ADD_AUTHOR:var a=Object(x.a)();return Object(p.a)(Object(p.a)({},e),{},{authors:Object(p.a)(Object(p.a)({},e.authors),{},Object(y.a)({},a,{first_name:t.payload.firstName,last_name:t.payload.lastName}))});case r.DELETE_AUTHOR:var n=Object(p.a)(Object(p.a)({},e),{},{authors:Object(p.a)({},e.authors)});return delete n.authors[t.payload],n;case r.SET_AUTHOR:return Object(p.a)(Object(p.a)({},e),{},{authors:Object(p.a)(Object(p.a)({},e.authors),{},Object(y.a)({},t.payload.id,Object(p.a)(Object(p.a)({},e.authors[t.payload.id]),{},{last_name:t.payload.lastName,first_name:t.payload.firstName})))});case r.SET_AUTHOR_STATUS:return Object(p.a)(Object(p.a)({},e),{},{status:t.payload});case r.SET_AUTHOR_IS_LOADING:return Object(p.a)(Object(p.a)({},e),{},{isLoading:t.payload});default:return Object(p.a)({},e)}}}),ie=localStorage.getItem("app-state");ie&&(te=JSON.parse(ie));var oe=Object(re.c)(ce,te,Object(re.a)(ne.a));oe.subscribe((function(){localStorage.setItem("app-state",JSON.stringify(oe.getState()))})),o.a.render(Object(b.jsx)(f.a,{store:oe,children:Object(b.jsx)(d.a,{children:Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(ae,{})})})}),document.getElementById("root"))}},[[266,1,2]]]);
//# sourceMappingURL=main.b13828fd.chunk.js.map